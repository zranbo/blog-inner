---
title: 流畅的Python - 文本和字节序列 (四)
author: zranbo
abbrlink: d12c295b
tags:
  - Fluent Python
categories: []
date: 2019-05-27 21:01:00
---
<b>字符问题</b>

字符串本身是个字符序列。这个定义没有问题。但是问题出现在对于“字符”的定义上。对于现在来说，“字符”应该是一个 Unicode 字符。

Unicode 标准把字符的标识和具体的字节表述进行了如下的明确区分
	
 - 字符的标识，即码位，是 0~1 114 111 的数字（十进制），在 Unicode 标准中以 4~6 个 十六进制数字表示，而且加前缀“U+”。例如，字母 A 的码位是 U+0041，欧元符号的 码位是 U+20AC，高音谱号的码位是 U+1D11E。在 Unicode 6.3 中（这是 Python 3.4 使 用的标准），约 10% 的有效码位有对应的字符。
 - 字符的具体表述取决于所用的编码。编码是在码位和字节序列之间转换时使用的算法。 在 UTF-8 编码中，A（U+0041）的码位编码成单个字节 \x41，而在 UTF-16LE 编码中 编码成两个字节 \x41\x00。再举个例子，欧元符号（U+20AC）在 UTF-8 编码中是三个 字节——\xe2\x82\xac，而在 UTF-16LE 中编码成两个字节 \xac\x20。
 
把码位转换成字节序列的过程是编码；把字节序列转换成码位的过程是解码。

```python
s = "你好hello"
print(s, len(s))
b = s.encode('utf8')
print(b, len(b))
print(b.decode('utf8'))
```

